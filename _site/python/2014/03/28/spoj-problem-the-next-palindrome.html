<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title> the-next-palindrome-SPOJ-5 —  &raquo;  M的奇葩漂流</title>
<meta name="description" content="人生如茶，空杯以对。对程序的态度，正如对生活的态度。
">
<meta name="keywords" content="">
<link rel="canonical" href="http://axemea.github.io/python/2014/03/28/spoj-problem-the-next-palindrome.html">
        




<!-- Twitter Cards -->
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="the-next-palindrome-SPOJ-5" />
<meta name="twitter:description" content="人生如茶，空杯以对。对程序的态度，正如对生活的态度。
" />
<meta name="twitter:image" content="http://axemea.github.io" />

<!-- Google plus -->
<meta name="author" content="https://www.google.com/+MotaquillahMaddane">
<link rel="author" href="https://www.google.com/+MotaquillahMaddane">

<!-- Open Graph -->
<meta property="og:locale" content="">
<meta property="og:type" content="article">
<meta property="og:title" content="the-next-palindrome-SPOJ-5">
<meta property="og:description" content="人生如茶，空杯以对。对程序的态度，正如对生活的态度。
">
<meta property="og:url" content="http://axemea.github.io/python/2014/03/28/spoj-problem-the-next-palindrome.html">
<meta property="og:site_name" content="M的奇葩漂流">

        <link href='http://fonts.googleapis.com/css?family=Inconsolata:400,700' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/assets/vendor/normalize-css/normalize.css">
<link rel="stylesheet" href="/css/main.css">
<link rel="stylesheet" href="/css/animate.min.css">

  <link rel="stylesheet" href="/assets/vendor/highlight/styles/solarized_dark.css">

<link rel="stylesheet" href="/assets/vendor/font-awesome/css/font-awesome.css">

    </head>

    <body>
        <div class="wrapper">
            <header class="header">
    <div class="navigation">
        <a href="/" class="logo fadeInRight animated">M的奇葩漂流</a>

        <ul class="menu">
            <li class="menu__entry"><a href="/">Blog</a></li>
            <li class="menu__entry"><a href="/about">关于</a></li>
        </ul>
    </div>

    <ul class="social-links">
        
            <a href="https://github.com/axemea" class="social-links__entry" target="_blank">
                <i class="fa fa-github"></i>
            </a>
        
    </ul>
</header>


            <h1 class="page-title post-title">
    <div class="page-title__text post-title__text">the-next-palindrome-SPOJ-5</div>
    <div class="page-title__subtitle post-title__subtitle"></div>
</h1>

<div class="content">
    <div class="highlighter-rouge"><pre class="highlight"><code>A positive integer is called a palindrome if its representation in the decimal system is the same when read from left to right and from right to left. For a given positive integer K of not more than 1000000 digits, write the value of the smallest palindrome larger than K to output. Numbers are
always displayed without leading zeros.
</code></pre>
</div>

<h3 id="input">INPUT</h3>

<p>The first line contains integer t, the number of test cases. Integers K are given in the next t lines.</p>

<h3 id="output">OUTPUT</h3>

<p>For each K, output the smallest palindrome larger than K.</p>

<h3 id="example">Example</h3>

<p>Input:</p>
<pre>
2
808
2133
</pre>
<p>Output:</p>
<pre>
818
2222
</pre>

<h3 id="code">Code</h3>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c"># -*- coding: utf-8 -*-   
</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="k">def</span> <span class="nf">open_file</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span>
    <span class="k">except</span> <span class="nb">IOError</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">"Error opening input file: "</span><span class="p">,</span><span class="n">filename</span>
        <span class="n">sys</span><span class="o">.</span><span class="nb">exit</span><span class="p">()</span>

<span class="c">#去除空格
</span>
<span class="k">def</span> <span class="nf">trim</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">)</span>

<span class="c">#将字符串换转成list
</span>
<span class="k">def</span> <span class="nf">str_to_list</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
    <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)):</span>
        <span class="nb">list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

    <span class="k">return</span> <span class="nb">list</span>

<span class="c">#补零
</span>
<span class="k">def</span> <span class="nf">fill_zero</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">'fill_zero'</span>
    <span class="n">lists</span> <span class="o">=</span> <span class="n">str_to_list</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="n">l</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">lists</span><span class="p">)</span>
    <span class="n">middle</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">l</span><span class="o">/</span><span class="mf">2.0</span><span class="p">))</span>
    <span class="n">s</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">middle</span><span class="p">):</span>
        <span class="n">front</span> <span class="o">=</span> <span class="n">middle</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="n">end</span> <span class="o">=</span>  <span class="n">l</span> <span class="o">-</span> <span class="n">front</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">if</span><span class="p">(</span><span class="n">lists</span><span class="p">[</span><span class="n">front</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">lists</span><span class="p">[</span><span class="n">end</span><span class="p">]</span> <span class="ow">and</span> <span class="nb">int</span><span class="p">(</span><span class="n">lists</span><span class="p">[</span><span class="n">front</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">int</span><span class="p">(</span><span class="n">lists</span><span class="p">[</span><span class="n">front</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">9</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">s</span><span class="p">):</span>
            <span class="n">lists</span><span class="p">[</span><span class="n">front</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">lists</span><span class="p">[</span><span class="n">front</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">lists</span><span class="p">[</span><span class="n">end</span><span class="p">]</span> <span class="o">=</span> <span class="n">lists</span><span class="p">[</span><span class="n">front</span><span class="p">]</span>
            <span class="n">s</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">elif</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
            <span class="n">lists</span><span class="p">[</span><span class="n">end</span><span class="p">]</span> <span class="o">=</span> <span class="n">lists</span><span class="p">[</span><span class="n">front</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">lists</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="s">'0'</span>

    <span class="k">return</span> <span class="s">''</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lists</span><span class="p">)</span>



<span class="c">#预处理，先处理掉如99999这样最高位需要进位的数字
</span>
<span class="k">def</span> <span class="nf">pre_palindrome</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
    <span class="n">_list</span> <span class="o">=</span> <span class="n">str_to_list</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">_list</span><span class="p">)):</span>
        <span class="k">if</span><span class="p">(</span><span class="n">_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="s">'9'</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">line</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

<span class="c">#主函数递归
</span>
<span class="k">def</span> <span class="nf">palindrome</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">'palindromes'</span>
    <span class="n">_list</span> <span class="o">=</span> <span class="n">str_to_list</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">l</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">_list</span><span class="p">)</span>
    <span class="n">middle</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">l</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">middle</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">!=</span> <span class="n">l</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">_list</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">&gt;</span> <span class="nb">int</span><span class="p">(</span><span class="n">_list</span><span class="p">[</span><span class="n">l</span> <span class="o">-</span> <span class="n">i</span>  <span class="o">-</span><span class="mi">1</span><span class="p">])):</span>
                <span class="n">s</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="n">_list</span><span class="p">[</span><span class="n">l</span> <span class="o">-</span> <span class="n">i</span>  <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>


    <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">''</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">_list</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">fill_zero</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>


<span class="s">'''if __name__ == '__main__':
    while True:
        group = sys.stdin.readline()
        for i in xrange(int(group)):
            line = sys.stdin.readline()
            print 'transform before : ',line
            line = transform_line(line)
            print 'transform after : ',line
            '''</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="nb">file</span> <span class="o">=</span> <span class="n">open_file</span><span class="p">(</span><span class="s">'test.txt'</span><span class="p">)</span>
    <span class="n">group</span> <span class="o">=</span> <span class="nb">file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
    <span class="n">group</span> <span class="o">=</span> <span class="n">trim</span><span class="p">(</span><span class="n">group</span><span class="p">)</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">group</span><span class="p">)):</span>
        <span class="n">line</span> <span class="o">=</span> <span class="nb">file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">trim</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">print</span> <span class="s">'-'</span><span class="p">,</span><span class="n">line</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">pre_palindrome</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">palindrome</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">print</span> <span class="s">'+'</span><span class="p">,</span><span class="n">line</span>

    <span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">();</span>

    <span class="k">print</span> <span class="s">'duration is'</span><span class="p">,</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span></code></pre></figure>

<h3 id="section">扯淡</h3>

<p>思路</p>

<ul>
  <li>
    <p>对输入值进行预处理，过滤掉需要最高位进位的数字，比如99,999,9999等</p>
  </li>
  <li>
    <p>通过循环，将前面的数，赋值给后面，设置标志位，如果发现，前面各位上的数，都比后面的数小，则执行fill_zero方法，称之为补零方法，以219993为case来说，它的前面各位就比后面小，那么开始补零，从中间开始，为9，而9再增1，就要进位了，就直接赋值为0，然后比较第三位的9和第五位的9，相等，并且第三位的9如果再增1也要进位，则直接赋值为0，比较第二位的1和第六位的9，1还可以自增，就将其自增，当有一位数字自增后，数字肯定比以前大了，而且是最小的，所以，之后的比较位置，直接将前面的数字赋值给后面即可。</p>
  </li>
</ul>

</div>

<div class="about">
    <div class="about__devider">*****</div>
    <div class="about__text">
        Written by <strong>  Zheng Yu </strong>
        on <strong>28 March 2014</strong>
    </div>
</div>


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'axemea';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>




        </div>

        <script src="/assets/vendor/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
        
    </body>
</html>
